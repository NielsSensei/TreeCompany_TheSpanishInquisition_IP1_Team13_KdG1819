@using Domain.UserInput
@model Domain.UserInput.Idea

@{
    Layout = "_Layout";
    IEnumerable<Report> badIdea = new List<Report>();
    badIdea = ViewData["Reports"] as IEnumerable<Report>;
}

@section Tags
{
    <title>Overview Of Idea @Model.Id</title>    
}

<div class="container">
    <div class="row">
        <div class="col-6">
            <h2>Idea</h2>
            <p><span style="font-weight: bold">Id:</span> @Model.Id</p>
            <p><span style="font-weight: bold">User:</span> @Model.User.Name</p>
            <p><span style="font-weight: bold">Number Of Votes:</span> @Model.VoteCount</p>
            <p><span style="font-weight: bold">Number Of Shares:</span> @Model.ShareCount</p>
            <p><span style="font-weight: bold">Number Of Retweets:</span> @Model.RetweetCount</p>
            <p><span style="font-weight: bold">Title:</span> @Model.Title</p>
            <p><span style="font-weight: bold">Content:</span> </p>
            @if (Model.Field.Text != null && !Model.Field.Text.Equals("<null>"))
            {    
                <p><span style="font-weight: bold">Field:</span> @Model.Field.Text</p>
            }
            
            @if (Model.Cfield != null)
            {
                <p><span style="font-weight: bold">Closed Field:</span></p>
                <p><span style="font-weight: bold">Is it multiplechoice?</span> @Model.Cfield.MultipleChoice</p>
                foreach (string opt in Model.Cfield.Options)
                {
                    <p>Option: @opt</p>
                }
            }
           
            <!-- TODO: (sprint2)
            public ImageField Ifield { get; set; }
            public VideoField Vfield { get; set; }
            public MapField Mfield { get; set; }
            -->            
        </div>
        <div class="col-6">
            <h2>Reports</h2>
            @if (badIdea.Count() > 0)
            {
                badIdea.OrderByDescending(x => (byte) (x.Status)).ToList();
                
                foreach (Report r in badIdea)
                {
                    <p><span style="font-weight: bold">Id:</span> @r.Id</p>
                    <p><span style="font-weight: bold">Flagger:</span> @r.Flagger.Name</p>
                    <p><span style="font-weight: bold">Reason:</span> @r.Reason</p>
                    <p><span style="font-weight: bold">Status:</span> @r.Status</p>
                    if (r.Status == ReportStatus.STATUS_NOTVIEWED)
                    {
                        <h2>Actions</h2>
                        <button class="btn btn-primary" href="#">Ask Review By Admin</button>
                        <button class="btn btn-primary" href="#">Approve Report</button>
                        <button class="btn btn-primary" href="#">Ignore Report</button>
                        <button class="btn btn-primary" href="#">Delete Report</button>
                    }                   
                }    
            }
            else
            {
                <p>This idea has no reports. </p>
            }                   
        </div>
    </div>     
        <!-- TODO: IPT13-60 Button voor dit idee te verwijderen -->
</div>